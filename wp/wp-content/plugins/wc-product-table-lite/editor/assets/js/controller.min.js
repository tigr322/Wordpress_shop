if(void 0===wcpt)var wcpt={controller:{},data:{}};jQuery(function(t){function e(){var e=t(".wcpt-editor-save-table-clear");window.scrollY+window.innerHeight<e.offset().top?t(".wcpt-editor-save-table").addClass("wcpt-editor-save-table--floating"):t(".wcpt-editor-save-table").removeClass("wcpt-editor-save-table--floating")}function n(){t.each(["wcpt-editor-tab-columns--focus-mode","wcpt-editor-device-columns-container--focused","wcpt-column-settings--focused","wcpt-column-settings--reveal-anim","wcpt-editor-tab-columns__device-tabs__column-link--focused","wcpt-child-column-link-selected"],function(e,n){t("."+n).removeClass(n)})}function o(e,n){n||(n=t(".wcpt-editor-tab-columns__device-tabs"));var o=a(n),i=c(e,o,n);l(i,o,n),w(i,o,n),x(i,o,n),m(e,i,o),n.data("wcpt_tab_state",i)}function c(e,n,o){var c=t.extend({},n,e);c=k(c,n);var i=z(c.device,o);return c.column_index>=i&&(c.column_index=null),c}function i(){return t(".wcpt-editor-tab-columns__device-tabs")}function a(t){var e={focus_mode:null,device:null,column_index:null};return t.data("wcpt_tab_state")||e}function l(e,o,c){e.focus_mode?(d(e,o,c),t(".wcpt-editor-columns-container").sortable("disable")):(n(),t(".wcpt-editor-columns-container").sortable("enable")),r(e,c)}function d(e,n,o){var c=t(".wcpt-editor-tab-columns");c.addClass("wcpt-editor-tab-columns--focus-mode");var i=p(o),a=A(e.device),l="wcpt-editor-device-columns-container--focused";i.removeClass(l),a.addClass(l);var d=u(o);if($target_column_settings=S(e.column_index,e.device),l="wcpt-column-settings--focused",d.removeClass(l),$target_column_settings.addClass(l),s(e,n)){var r="wcpt-column-settings--reveal-anim";$target_column_settings.removeClass(r),setTimeout(function(){$target_column_settings.addClass(r)},1)}}function s(t,e){if(t.device!==e.device||t.column_index!==e.column_index||t.focus_mode!==e.focus_mode)return!0}function r(e,n){t('input[name="wcpt-show-all-columns"]',n).prop("checked",!e.focus_mode)}function p(t){var e=a(t);return A(e.device)}function u(t){var e=a(t);return S(e.column_index,e.device)}function w(t,e,n){if(t.device!==e.device){var o=F(n),c=N(t.device,n),i=h(n),a=y(t.device,n),l="wcpt-editor-tab-columns__device-tabs__panels__item--selected",d="wcpt-editor-tab-columns__device-tabs__triggers__item--selected";o.removeClass(l),c.addClass(l),i.removeClass(d),a.addClass(d),f(t.device,n)}b(t,n)}function m(t,e,n){e.focus_mode?n.focus_mode||g():t.column_index?_(e.column_index,e.device):t.device&&v(e.device)}function v(e){var n=A(e),o=T(),c=n.offset().top-o-20;t("html, body").stop().animate({scrollTop:c},300,"swing")}function _(e,n){var o=S(e,n),c=T(),i=o.offset().top-c-20;if(o.is(":hidden")){var a=o.prev(".wcpt-row-plc-hld");i+=a.offset().top}t("html, body").stop().animate({scrollTop:i},300,"swing")}function g(){var e=t("#wpadminbar").outerHeight(),n=t(".wcpt-editor").offset().top-e-20;window.scrollTo(0,n)}function f(e,n){var o=0,c=$(e,n);c.removeClass("wcpt-column-link--reveal-anim").each(function(){var e=t(this);setTimeout(function(){e.addClass("wcpt-column-link--reveal-anim")},o),o+=20})}function b(t,e){var n=N(t.device,e),o=I(t.device,e),c=!1;null!==t.column_index&&t.column_index<o.length&&(c=!0),n.toggleClass("wcpt-child-column-link-selected",c)}function h(t){var e=a(t);return y(e.device,t)}function y(e,n){return t('.wcpt-editor-tab-columns__device-tabs__triggers__item[data-wcpt-device="'+e+'"]',n)}function k(t,e){return t.device===e.device&&t.focus_mode===e.focus_mode||(t.column_index=0),t}function x(t,e,n){if(t.column_index!=e.column_index||t.device!=e.device){var o=C(n),c=W(t.column_index,t.device,n),i="wcpt-editor-tab-columns__device-tabs__column-link--focused";o.removeClass(i),c.addClass(i)}}function C(t){var e=a(t);return W(e.column_index,e.device,t)}function T(){return t("#wpadminbar").outerHeight()+t(".wcpt-editor-tab-columns__device-tabs").outerHeight()}function A(e){return t('.wcpt-editor-columns-container[data-wcpt-device="'+e+'"]')}function S(e,n){if(null===e)return t();var o=A(n);return t("> .wcpt-column-settings",o).eq(e)}function D(t){var e=i();e.data("wcpt-tabs-last-column-trigger",t)}function R(t){var e=i();return e.data("wcpt-tabs-last-column-trigger")}function O(){D(!1)}function P(e){var n=t(".wcpt-editor-tab-columns__device-tabs__show-all-columns",e),o=j(e);n.toggle(o)}function j(e){var n=e.data("wcpt-columns"),o=!1;return t.each(n,function(t,e){e.length&&(o=!0)}),o}function H(e){var n=e.data("wcpt-columns"),o={};return t.each(["laptop","tablet","phone"],function(e,c){o[c]=[],t.each(n[c],function(t,e){o[c].push(e.name)})}),o}function I(t,e){var n=H(e);return n[t]}function z(t,e){var n=H(e);return n[t].length}function F(t){var e=a(t);return N(e.device,t)}function N(t,e){return e.find('.wcpt-editor-tab-columns__device-tabs__panels__item[data-wcpt-device="'+t+'"]')}function W(e,n,o){if(null===e)return t();var c=N(n,o);return c.find(".wcpt-column-link").eq(e)}function $(t,e){var n=N(t,e);return n.find(".wcpt-column-link")}function q(e){t.each(["laptop","tablet","phone"],function(t,n){B(n,e)}),P(e)}function B(t,e){U(t,e),E(t,e)}function U(e,n){var o=n.data("wcpt-columns"),c=N(e,n),i=a(n),l=i.device===e?i.column_index:-1;c.empty();for(const[n,i]of Object.entries(o[e])){var d=i.name?i.name:"Column",s="wcpt-editor-tab-columns__device-tabs__column-link wcpt-column-link wcpt-column-link--reveal-anim";n==l&&(s+=" wcpt-editor-tab-columns__device-tabs__column-link--focused"),c.append(t('<a href="#" data-wcpt-index="'+n+'" class="'+s+'" ><span class="wcpt-column-link__count">'+(parseInt(n)+1)+"</span>"+d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</a>"))}c.append(t('<a href="#" class="wcpt-column-link--reveal-anim" data-wcpt-index="add">+ Add column</a>'))}function E(e,n){var c=N(e,n);c.sortable({containment:"parent",items:"> a:not([data-wcpt-index='add'])",start:function(t,e){e.placeholder.height(e.item.height()),e.placeholder.width(e.item.width())},stop:function(i,l){var d=$(e,n),s=A(e),r=t("> .wcpt-button",s);d.each(function(){var e=t(this).attr("data-wcpt-index"),n=s.children('[wcpt-model-key-index="'+e+'"]');n.insertBefore(r)});var p=a(n);if(p.focus_mode){var u=c.children(".wcpt-editor-tab-columns__device-tabs__column-link--focused");u.length&&o({column_index:u.index()})}s.trigger("sortupdate")}})}var K=wcpt.controller,Q=wcpt.data;K.update_table_title=function(){var e=t(this),n=e.val();t('.wcpt-editor-save-table [name="title"]').val(n)},K.switch_editor_tabs=function(){var e=t(this),n=e.attr("data-wcpt-tab"),o=e.siblings(".wcpt-tab-label"),c=e.siblings(".wcpt-tab-content"),i=c.filter("[data-wcpt-tab="+n+"]"),a="active";o.removeClass(a),e.addClass(a),c.removeClass(a),i.addClass(a),window.location.hash=n},K.toggle_sub_categories=function(){var e=t(this);e.parent().toggleClass("wcpt-show-sub-categories")},K.auto_select_on_click=function(){var t=this;if(document.body.createTextRange){const e=document.body.createTextRange();e.moveToElementText(t),e.select()}else if(window.getSelection){const e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}},K.save_data=function(e){e.preventDefault();var n=t("input:focus, textarea:focus");n.length&&n.attr("wcpt-model-key")&&n.trigger("change"),t("body").trigger("wcpt_save"),Q.version=window.wcpt_version;var o=t(this),c=o.find("input[name='post_id']").val(),i=o.find("input[name='title']").val(),a=o.find("input[name='nonce']").val(),l=JSON.stringify(Q),d=o.find(".wcpt-save"),s=o.attr("action");o.hasClass("wcpt-saving")||t.ajax({type:"POST",url:ajaxurl,beforeSend:function(){o.addClass("wcpt-saving"),d.addClass("disabled")},data:{action:s,wcpt_post_id:c,wcpt_title:i,wcpt_nonce:a,wcpt_data:l},success:function(t){o.removeClass("wcpt-saving"),d.removeClass("disabled"),"string"==typeof t&&-1!==t.indexOf("WCPT success:")?console.log(t):alert(t)}})},K.open_dynamic_input_wrapper=function(){var e=t(this);if(!e.parent().hasClass("wcpt-diw")&&!e.hasClass("wcpt-diw--disabled")){e.attr("style");var n={width:e.outerWidth()};t.each(["float","margin","top","right","bottom","left"],function(t,o){n[o]=e.css(o)}),"absolute"==e.css("position")&&(n.position="absolute");var o=t('<div class="wcpt-diw">');o.css(n),e.wrap(o),e.focus(),t("body").on("blur mousedown keydown",K.close_dynamic_input_wrapper),e.after('<div class="wcpt-diw-tray">');var c=e.next(".wcpt-diw-tray");if(-1!==e.attr("wcpt-model-key").indexOf("color")||"background"==e.attr("wcpt-model-key")||"fill"==e.attr("wcpt-model-key")){c.append('<input type="color">'),c.css({height:0});var i=c.find('input[type="color"]');i.spectrum({color:e.val(),flat:!0,allowEmpty:!0,showAlpha:!0,preferredFormat:"rgba",clickoutFiresChange:!0,showInput:!1,showButtons:!1,move:function(t){e.val(t.toRgbString()).change()}})}}},K.close_dynamic_input_wrapper=function(e){var n=t(e.target),o=n.closest(".wcpt-diw");o.length||t(".wcpt-diw").each(function(){var e=t(this),n=e.children("input");e.replaceWith(n),t("body").off("blur mousedown keydown",K.close_dynamic_input_wrapper),n.change()})},t("body").on("keydown","input[wcpt-model-key]",function(e){if(e.key&&-1!==t.inArray(e.key,["ArrowUp","ArrowDown"])&&-1!==t.inArray(t(this).attr("wcpt-model-key"),["font-size","custom_zoom_scale","line-height","letter-spacing","stroke-width","top","left","right","bottom","width","max-width","min-width","height","max-height","min-height","border-radius","border-width","border-left-width","border-right-width","border-top-width","border-bottom-width","divider-border-width","padding","padding-left","padding-right","padding-top","padding-bottom","section-padding","section-padding-left","section-padding-right","section-padding-top","section-padding-bottom","margin","margin-left","margin-right","margin-top","margin-bottom","gap","row_gap"])){e.target.value||(e.target.value="0px");var n=e.target.value.slice(-2),o=e.target.value;o.length>2&&isNaN(n)?o=o.substring(0,o.length-2):n="";var c=!((parseInt(o)+"").length===(o+"").length);"ArrowUp"==e.key?e.target.value=(10*o+(c?1:10))/10:"ArrowDown"==e.key&&(e.target.value=(10*o-(c?1:10))/10),o=e.target.value,c&&(parseInt(o)+"").length===(o+"").length&&(e.target.value=e.target.value+".0"),e.target.value+=n}}),t("body").on("click",".wcpt-tab-label",K.switch_editor_tabs),t("body").on("blur",".wcpt-table-title",K.update_table_title),t("body").on("click",".wcpt-toggle-sub-categories",K.toggle_sub_categories),t("body").on("focus",'input[type="text"][wcpt-model-key], input[type="number"][wcpt-model-key]',K.open_dynamic_input_wrapper),t("body").on("click",".wcpt-auto-select-on-click",K.auto_select_on_click),dominator_ui.init(t(".wcpt-editor, .wcpt-settings"),Q),t("body").on("click",".wcpt-toggle-label",function(){var e=t(this),n=e.closest(".wcpt-toggle-options"),o=n.attr("wcpt-model-key")||n.attr("data-wcpt-anchor");n.toggleClass("wcpt-open"),o&&n.parent().hasClass("wcpt-settings")&&(window.location.hash=o)}),t("body").on("click",".wcpt-editor-row-handle",function(e){var n=t(e.target),o=n.closest(".wcpt-editor-row");!n.closest(".wcpt-editor-row-no-toggle").length&&n.closest(".wcpt-editor-row-handle-data, .wcpt-editor-row-toggle").length&&o.toggleClass("wcpt-editor-row-toggle-opened")}),t("body").on("click",".wcpt-toggle",function(e){e.preventDefault();var n=t(this),o=t("> .wcpt-toggle-trigger",n);t(e.target).closest(o).length&&n.toggleClass("wcpt-toggle-on wcpt-toggle-off"),t("body").off("click.wcpt_toggle_close").one("click.wcpt_toggle_close",function(e){t(e.target).closest(n).length||n.removeClass("wcpt-toggle-on").addClass("wcpt-toggle-off")}),n.find("a").off("click.wcpt_toggle_link").on("click.wcpt_toggle_link",function(t){window.open(this.href,"_blank")})}),window.location.hash&&(t('[data-wcpt-tab="'+window.location.hash.substr(1)+'"].wcpt-tab-label').trigger("click"),t('.wcpt-settings > [wcpt-model-key="'+window.location.hash.substr(1)+'"] > .wcpt-toggle-label, .wcpt-settings > [data-wcpt-anchor="'+window.location.hash.substr(1)+'"] > .wcpt-toggle-label').trigger("click")),t("body").on("submit",".wcpt-save-data",K.save_data),t(window).bind("keydown",function(e){(e.ctrlKey||e.metaKey)&&"s"===String.fromCharCode(e.which).toLowerCase()&&(e.preventDefault(),t(".wcpt-save-data").submit())}),t(".wcpt-editor, .wcpt-settings").length&&(t(window).on("scroll",e),t("body").on("click",".wcpt-toggle-options",e),e()),t("body").on("click",".wcpt-editor-tab-columns__device-tabs__triggers__item",function(e){var n=t(this),c=n.attr("data-wcpt-device");o({device:c})});var Y=t(".wcpt-editor-tab-columns__device-tabs__scroll-to-top");t(window).on("scroll",function(){window.scrollY>800?Y.addClass("wcpt-editor-tab-columns__device-tabs__scroll-to-top--visible"):Y.removeClass("wcpt-editor-tab-columns__device-tabs__scroll-to-top--visible")}),Y.on("click",function(e){e.preventDefault();var n=t(".wcpt-page-title"),o=n.offset().top-t("#wpadminbar").outerHeight()-20;t("html, body").stop().animate({scrollTop:o},300,"swing")}),t('[name="wcpt-show-all-columns"]').on("change",function(){var e=t(this);o({focus_mode:!e.is(":checked"),device:"laptop"})}),t("body").on("click",".wcpt-editor-tab-columns__device-tabs__panels__item a",function(e){e.preventDefault();var n=t(this),c=n.attr("data-wcpt-index");if(n.is('[data-wcpt-index="add"]')){var l=i(),d=a(l),s=A(d.device);t(">.wcpt-button",s).click()}else o({column_index:c})}),window.device_tabs__set_state=o;var J=t(".wcpt-editor-tab-columns__device-tabs");J.length&&(q(J),o({focus_mode:!0,device:"laptop",column_index:0},J)),t("body").on("update.wcpt",".wcpt-editor-tab-columns__device-tabs",function(){var e=t(this),n=R(e);if(n){switch(q(e),n.action){case"remove":o({column_index:null});break;case"add":o({column_index:n.column_index,device:n.device});break;case"duplicate":o({column_index:parseFloat(n.column_index)+1,device:n.device})}O()}}),t("body").on("keydown",'input[type="text"].wcpt-column-name',function(){var e=t(this).closest(".wcpt-column-settings"),n=e.attr("wcpt-model-key-index"),o=e.closest(".wcpt-editor-columns-container").attr("data-wcpt-device");D({action:"false",column_index:n,device:o})}),t("body").on("dom_ui_before_remove_row",".wcpt-column-settings",function(){var e=t(this);column_index=e.attr("wcpt-model-key-index"),device=e.closest(".wcpt-editor-columns-container").attr("data-wcpt-device"),D({action:"remove",column_index:column_index,device:device})}),t("body").on("dom_ui_before_duplicate_row",".wcpt-column-settings",function(){var e=t(this);column_index=e.attr("wcpt-model-key-index"),device=e.closest(".wcpt-editor-columns-container").attr("data-wcpt-device"),D({action:"duplicate",column_index:column_index,device:device})}),t("body").on("dom_ui_before_add_row",".wcpt-editor-columns-container",function(){var e=t(this);column_index=e.data("wcpt-data").length,device=e.attr("data-wcpt-device"),D({action:"add",column_index:column_index,device:device})}),t("body").on("sortupdate dom_ui_before_row_move_up dom_ui_before_row_move_down dom_ui_before_row_sortupdate dom_ui_before_row_sortreceive",".wcpt-editor-columns-container",function(){D({action:!1})}),t("body").on("click",".wcpt-editor-row-expand, .wcpt-editor-row-contract",function(e){var n=t(this),o=n.closest(".wcpt-column-settings");n.hasClass("wcpt-editor-row-expand")?o.addClass("wcpt-toggle-column-expand"):o.removeClass("wcpt-toggle-column-expand"),e.preventDefault()}),t("body").on("click",".wcpt-column-toggle-capture",function(t){}),t(".wcpt-select-icon").each(function(){var e=t(this);e.select2({templateResult:function(e){var n='<img class="wcpt-icon-rep" src="'+wcpt_icons_url+"/"+e.id+'.svg">',o=t("<span>"+n+'<span class="wcpt-icon-name">'+e.text+"</span></span>");return o},templateSelection:function(e){var n='<img class="wcpt-icon-rep" src="'+wcpt_icons_url+"/"+e.id+'.svg">',o=t("<span>"+n+'<span class="wcpt-icon-name">'+e.text+"</span></span>");return o},dropdownParent:e.parent()})}),window.wcpt_duplicate_laptop_to_phone=function(){wcpt_duplicate_device("laptop","phone")},window.wcpt_duplicate_laptop_to_tablet=function(){wcpt_duplicate_device("laptop","tablet")},window.wcpt_duplicate_device=function(e,n){e||(e="laptop"),n||(n="phone"),t.each(Q.columns[e],function(e,o){Q.columns[n].push(dominator_ui.refresh_ids(t.extend(!0,{},o)))}),t(".wcpt-editor-save-button").click(),window.location.reload()},t("body").on("click",".wcpt-reset-global-settings",function(t){window.confirm("Are you sure you want to reset WCPT global settings? This will not delete your tables. It will only reset the global settings for this plugin.")||t.preventDefault()}),t("body").on("click",".wcpt-activate-license, .wcpt-deactivate-license",function(){var e=t(this),n=e.siblings().addBack(),o="wcpt_manage_license",c=e.attr("data-wcpt-purpose"),i=e.attr("data-wcpt-nonce"),a=e.closest(".wcpt-license-container"),l=a.find(">.wcpt-license-key-status",a),d=a.find('[wcpt-model-key="key"]').val(),s=a.attr("wcpt-addon-slug")?a.attr("wcpt-addon-slug"):"",r=a.attr("wcpt-addon-item-id")?a.attr("wcpt-addon-item-id"):"",p=a.find(".wcpt-license-feedback");d&&32==d.length?t.ajax({type:"POST",url:ajaxurl,beforeSend:function(){t(">span",p).addClass("wcpt-hide"),a.addClass("wcpt-verifying-license"),n.prop("disabled",!0)},data:{action:o,wcpt_nonce:i,wcpt_purpose:c,wcpt_key:d,wcpt_addon_slug:s,wcpt_addon_item_id:r},success:function(t){switch(a.removeClass("wcpt-verifying-license"),n.prop("disabled",!1),t){case"deactivated":p.find(".wcpt-response-deactivated").removeClass("wcpt-hide"),n.filter('[data-wcpt-purpose="deactivate"]').prop("disabled",!0);break;case"activated":p.find(".wcpt-response-activated").removeClass("wcpt-hide"),n.filter('[data-wcpt-purpose="activate"]').prop("disabled",!0);break;case"active_elsewhere":p.find(".wcpt-response-active-elsewhere").removeClass("wcpt-hide");break;case"invalid_key":p.find(".wcpt-response-invalid-key").removeClass("wcpt-hide");break;default:p.find(".wcpt-response-invalid-response").removeClass("wcpt-hide")}"activated"==t?l.val("active"):l.val("inactive"),l.trigger("change")}}):alert("Please enter the valid 32 character license key received in your purchase email.")}),window.location.hash&&"pro_license"==window.location.hash.substr(1)&&t('[wcpt-model-key="pro_license"]').addClass("wcpt-open");var L=t(".wcpt-shortcode-info"),G=t("tr",L).filter(function(){var e=t(this);return e.find(".wcpt-pro-badge").length}),M=t('<tr><td colspan="2">Following are all <span class="wcpt-pro-badge">PRO</span> version options:</td></tr>');G.length&&(t("td",M).css({"font-size":"22px","font-weight":"bold","text-transform":"capitalize",padding:"40px 10px"}),t.merge(M,G).appendTo("tbody",L)),t(document).on("wcptReactQueryAppUpdate",function(t){wcpt.data.query_v2=t.detail}),t(window).trigger("wcpt_controller_ready")});